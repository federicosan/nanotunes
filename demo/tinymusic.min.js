(function(){function d(a,b){this.a=new AudioContext;this.j=b}var g=/^([A-Z]{3})/,h=/([A-GX]#?)([1-8])([1-9]{1,2})/g,k=new Map([["C",16.35],["C#",17.32],["D",18.35],["D#",19.45],["E",20.6],["F",21.83],["F#",23.12],["G",24.5],["G#",25.96],["A",27.5],["A#",29.14],["B",30.87],["X",0]]);d.prototype.play=function(a){a=this.j[a];for(var b in a.parts){var e=this.g(a.parts[b],a.bpm);this.b(e)}};d.prototype.g=function(a,b){a.match(g);for(var e=[],c;c=h.exec(a);)e.push({length:this.f(c[3],b),i:this.c(c[1],c[2])});
return e};d.prototype.f=function(a,b){return parseInt(a)/(b/60)/4};d.prototype.c=function(a,b){return k.get(a)*Math.pow(1.059463094359,12*b)};d.prototype.b=function(a){var b=this;a.reduce(function(a,c){return a.then(function(){return b.h(c)})},Promise.resolve()).then(function(){return b.b(a)})};d.prototype.h=function(a){var b=this;return new Promise(function(d){var c=b.a.createOscillator(),f=b.a.createGain();c.type="square";c.frequency.value=a.i;f.gain.value=.3;c.connect(f);f.connect(b.a.destination);
c.addEventListener("ended",d);c.start(0);c.stop(b.a.currentTime+a.length)})};this.TM=d})(this);
