(function(){function d(a,b){this.a=new AudioContext;this.s=a;this.u=b}var f=/^([A-Z]{3})/,g=/([A-GX]#?)([1-8])([1-9]{1,2})/g,h=new Map([["C",16.35],["C#",17.32],["D",18.35],["D#",19.45],["E",20.6],["F",21.83],["F#",23.12],["G",24.5],["G#",25.96],["A",27.5],["A#",29.14],["B",30.87],["X",0]]);d.prototype.play=function(a){a=this.u[a];for(var b=0;b<a.parts.length;b++){var c=this.s[this.m(a.parts[b])],e=this.l(a.parts[b],a.bpm),c=this.h(c);this.j(c,e)}};d.prototype.m=function(a){return a.match(f)[1]};
d.prototype.l=function(a,b){for(var c=[],e;e=g.exec(a);)c.push({length:this.i(e[3],b),o:this.g(e[1],e[2])});return c};d.prototype.i=function(a,b){return parseInt(a)/(b/60)/4};d.prototype.g=function(a,b){return h.get(a)*Math.pow(1.059463094359,12*b)};d.prototype.h=function(a){var b=this.a.createOscillator();b.type=a.wave;b.frequency.value=0;var c=this.c(b,a.gain),c=this.f(c,a.pan);c.connect(this.a.destination);b.start();return b};d.prototype.j=function(a,b){for(var c=this.a.currentTime,e=0;e<b.length;e++){var d=
b[e];a.frequency.setValueAtTime(b[e].o,c);c+=d.length}};d.prototype.c=function(a,b){return this.b(a,b,"createGain","gain")};d.prototype.f=function(a,b){return this.b(a,b,"createStereoPanner","pan")};d.prototype.b=function(a,b,c,d){if(!b)return a;c=this.a[c]();c[d].value=b;a.connect(c);return c};this.TM=d})(this);
